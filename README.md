# Project
## Инструкция
### Перед началом работы необходимо:
1.	Установить Python (при создании была использована версия 3.7, однако более ранние версии должны подойти ( https://www.python.org/downloads/)
2.	Установить Jupyter-Notebook (https://jupyter.org/, либо встроенный в Anaconda (рекомендуется)https://www.anaconda.com/download/). 
3.	Установить MySQL (https://dev.mysql.com/downloads/mysql/, при установке отметить галочкой установку MySQL Connector/ Python.
4.	Обновить команды pip до последней версии (через командную строку с помощью команды python -m pip install --upgrade pip)
5.	Обновить пакет pandas до последней версии (через командную строку с помощью команды pip install --upgrade pandas)
# Блок автоматического импорта в базу данных неструктурированных данных
1. Создать пользователя и БД:
  + Открыть командную строку MySQL Command Line Client
  + Создать нового пользователя: CREATE USER project_user;
  + Создать новую БД: CREATE DATABASE project_db;
  + Предоставить пользователю привилегии на БД: GRANT ALL PRIVILEGES ON project_db.* TO project_user;
  + Обновить привилегии: FLUSH PRIVILEGES;
2.	Скачать папки «анкеты» и «контракты» по ссылке (https://drive.google.com/drive/folders/1VwgP8Vc_RCNAoZK5tWt6aUqdET6cS5vS)
3.	Создайте на своём компьютере папку, присвойте ей какое-либо название на английском языке (далее в инструкции Untitled Folder) и создайте внутри этой папки ещё две папки с названиями: contracts и applications. В папку contracts распакуйте архив с данными по контрактам, а в папку applications распакуйте архив с данными по анкетам кредитных заявок. Важно, чтобы в папках contracts и applications не было никаких подпапок, а сразу находились только файлы с расширением .xlsx). Кроме указанных данных в папках contracts и applications не должно ничего находиться.
4.	Скачайте xls файл с данными по платежам (payments) и поместите в общую папку проекта (Untitled Folder) (https://drive.google.com/open?id=1VwgP8Vc_RCNAoZK5tWt6aUqdET6cS5vS)
5.	Скачайте тетрадку part_1.ipynb и поместите её в созданную вами папку Untitled Folder (https://github.com/kalininiad/Project)
6.	В папке Untitled Folder создайте 4 пустых папки: output_1, output_2, output_3, output_4 (папки для хранения отчетов по каждому блоку заданий) 
7.	Открыть part_1.ipynb с помощью Jupyter Notebook
8.	В четвертой ячейке тетрадки (part_1.ipynb) изменить путь для переменной my_path, в соответствии с тем, куда вы сохранили данные и саму тетрадку.
9.	Запустите весь код с помощью нажатия Cell -> Run All.
## Описание кода
1.	Сначала загружаются данные по анкетам в виде таблиц в Python, таблица  преобразуется (корректируются форматы дат для дальнейшей загрузки в базу данных в единый формат даты, удаляются неотобранные для дальнейшей работы поля); создается таблица applications в базе данных, заполняются данными из таблицы Python. По то самое делается по контрактам, создается таблица contracts, связанная с applications по полю id_number. 
2.	Далее загружается таблица данных по платежам (из payments) и отправляется в базу данных. При подключении к базе данных проверяется правильность загрузки в БД таблицы платежей. В ходе проверки выявлено, что нет контракта 100875, такой платёж не передаётся в базу. 
3.	Все данные таблиц выгружаются в папку output_1  в формате csv.
## Результаты
1.	В созданной базе данных появляются таблицы: contracts (c данными по контрактам), applications (с данными по анкетам), payments (с данными по платежам). 
2.	Все текстовые поля перекодированы в числа, для расшифровки кодов в базу данных переданы словари applications_dict, contracts_dict. 
3.	Данные по созданным таблицам выгружены в формате cvs.
